<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Agar Mobile</title>

  <!-- CSS do jogo (HUD, minimapa, etc.) -->
  <link rel="stylesheet" href="src/css/style.css" />
  <!-- CSS do seu menu/landing animado -->
  <link rel="stylesheet" href="src/css/menu.css" />

  <meta name="theme-color" content="#001122" />
</head>
<body>
  <div id="gameContainer">
    <!-- Canvas principal -->
    <canvas id="gameCanvas"></canvas>

    <!-- HUD -->
    <div id="ui" class="hidden">
      Pontua√ß√£o: <b id="score">0</b> ‚Ä¢ Massa: <b id="mass">10</b>
    </div>

    <!-- Status do Rage -->
    <div id="rageStatus">üò° RAGE MODE (<span id="rageTime">10</span>s)</div>

    <!-- TELA INICIAL (seu menu entra aqui dentro) -->
    <div id="start">
      <div class="box" style="background:transparent;border:none;padding:0;box-shadow:none">
        <!-- Fundo animado -->
        <div class="game-background" id="gameBackground"></div>

        <!-- Conte√∫do do seu menu -->
        <div class="container">
          <!-- Header -->
          <div class="header">
            <div class="player-info">
              <div class="avatar">üéÆ</div>
              <div class="player-stats">
                <div class="player-name">Jogador</div>
                <div class="player-level">N√≠vel 15</div>
              </div>
            </div>
            <div class="coins">üí∞ 2,450</div>
          </div>

          <!-- XP Progress -->
          <div class="xp-section">
            <div class="xp-info">
              <span>XP: 3,250 / 5,000</span>
              <span>Pr√≥ximo N√≠vel: 16</span>
            </div>
            <div class="xp-bar">
              <div class="xp-progress"></div>
            </div>
          </div>

          <!-- Logo -->
          <div class="logo">
            <h1>
              <div class="virus-icon"></div>
              AGAR MOBILE
            </h1>
          </div>

          <!-- Server Info -->
          <div class="server-info">
            <div class="server-row">
              <span>Servidor:</span>
              <span class="server-status">Brasil 25ms</span>
            </div>
            <div class="server-row">
              <span>Modo de Jogo:</span>
              <span>FFA</span>
            </div>
            <div class="server-row">
              <span>Players Online:</span>
              <span class="online-count">1,247</span>
            </div>
          </div>

          <!-- Miss√£o di√°ria -->
          <div class="daily-mission">
            <div class="mission-title">üéØ Miss√£o Di√°ria</div>
            <div class="mission-desc">Colete 500 c√©lulas pequenas</div>
            <div class="mission-progress">
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="mission-reward">+200 üí∞</div>
            </div>
          </div>

          <!-- Dificuldade (visual) -->
          <div class="difficulty-section">
            <div class="difficulty-title">DIFICULDADE</div>
            <div class="difficulty-options">
              <button class="difficulty-btn difficulty-easy selected" data-diff="easy">
                üòä<br>F√ÅCIL
              </button>
              <button class="difficulty-btn difficulty-normal" data-diff="normal">
                üòê<br>NORMAL
              </button>
              <button class="difficulty-btn difficulty-hard" data-diff="hard">
                üò§<br>DIF√çCIL
              </button>
            </div>
          </div>

          <!-- Modos -->
          <div class="game-modes">
            <!-- ESTE bot√£o inicia o jogo -->
            <button id="btnStart" class="mode-btn mode-solo">
              üë§<br>JOGAR<br>SOZINHO
            </button>

            <!-- Demais ainda ‚Äúdecorativos‚Äù por enquanto -->
            <button class="mode-btn mode-online">
              üë•<br>JOGAR<br>ONLINE
            </button>
            <button class="mode-btn mode-tournament">
              üèÜ<br>TORNEIO<br>SEMANAL
            </button>
            <button class="mode-btn mode-arena">
              üèõÔ∏è<br>ARENA<br>RANQUEADA
            </button>
          </div>

          <!-- Specials -->
          <div class="special-section">
            <button class="special-btn bonus-btn">üéÅ B√îNUS<br>DI√ÅRIO</button>
            <button class="special-btn shop-btn">üõí LOJA<br>DE SKINS</button>
          </div>

          <!-- Online Info -->
          <div class="online-info">
            <span class="online-count">1,247</span> jogadores online agora
          </div>
        </div>
      </div>
    </div>

    <!-- Game Over -->
    <div id="over" class="hidden">
      <div class="box">
        <h2>üíÄ Game Over</h2>
        <p>Pontua√ß√£o: <b id="finalScore">0</b> ‚Ä¢ Massa: <b id="finalMass">0</b></p>
        <button id="btnRestart">Jogar novamente</button>
      </div>
    </div>

    <!-- Minimap -->
    <div id="minimapWrap" class="hidden">
      <canvas id="minimap" width="180" height="130"></canvas>
    </div>

    <!-- Bot√µes mobile -->
    <div id="mobileBtns" class="hidden">
      <button id="btnEject">EJETAR</button>
      <button id="btnSplit">DIVIDIR</button>
    </div>
  </div>

  <!-- Entrada do app (ES Modules) -->
  <script type="module" src="src/js/main.js"></script>
  <!-- JS leve do menu (s√≥ FX visuais ‚Äì opcional) -->
  <script>
    // plano de fundo animado
    class GameBackground {
      constructor() {
        this.container = document.getElementById('gameBackground');
        this.cells = [];
        this.cellTypes = [
          { size: 'small',  weight: 60, minSize: 6,  maxSize: 12 },
          { size: 'medium', weight: 25, minSize: 20, maxSize: 35 },
          { size: 'large',  weight: 10, minSize: 40, maxSize: 60 },
          { size: 'huge',   weight: 4,  minSize: 65, maxSize: 85 },
          { size: 'virus',  weight: 1,  minSize: 35, maxSize: 35 }
        ];
        this.colors = ['cell-color-1','cell-color-2','cell-color-3','cell-color-4','cell-color-5','cell-color-6','cell-color-7','cell-color-8'];
        this.init();
      }
      init(){ this.createInitialCells(); this.startCellGeneration(); this.startConsumptionSimulation(); }
      createInitialCells(){ for (let i=0;i<25;i++) this.createCell(Math.random()*innerWidth); }
      getCellType(){ const r=Math.random()*100; let acc=0; for(const t of this.cellTypes){ acc+=t.weight; if(r<=acc)return t; } return this.cellTypes[0]; }
      createCell(startX=-100){
        const t=this.getCellType();
        const cell=document.createElement('div');
        const size=Math.random()*(t.maxSize-t.minSize)+t.minSize;
        const y=Math.random()*(innerHeight-size);
        const speed=Math.random()*10+5;
        cell.className=`game-cell ${t.size}-cell`;
        if(t.size==='virus'){ cell.classList.add('virus-cell'); }
        else{
          const color=this.colors[Math.floor(Math.random()*this.colors.length)];
          cell.classList.add(color);
          if(t.size==='large'||t.size==='huge'){
            const names=['Player','Bot','AI','Pro','Noob','King','Queen','Master'];
            cell.textContent=names[Math.floor(Math.random()*names.length)];
          }
        }
        Object.assign(cell.style,{
          width:`${size}px`, height:`${size}px`, left:`${startX}px`, top:`${y}px`,
          animationDuration:`${speed}s`, animationDelay:`${Math.random()*2}s`
        });
        this.container.appendChild(cell);
        this.cells.push({element:cell,size,type:t.size,x:startX,y});
        setTimeout(()=>{ if(cell.parentNode){ this.container.removeChild(cell); this.cells=this.cells.filter(c=>c.element!==cell);} }, (speed+2)*1000);
      }
      startCellGeneration(){ setInterval(()=>{ if(this.cells.length<30) this.createCell(); }, Math.random()*2000+1000); }
      startConsumptionSimulation(){
        setInterval(()=>{
          const small=this.cells.filter(c=>c.type==='small');
          if(small.length>0 && Math.random()<0.3){
            const s=small[Math.floor(Math.random()*small.length)];
            s.element.classList.add('consuming');
            setTimeout(()=>{ if(s.element.parentNode){ this.container.removeChild(s.element); this.cells=this.cells.filter(c=>c.element!==s.element);} }, 500);
          }
        }, 3000);
      }
    }
    document.addEventListener('DOMContentLoaded', ()=>{ new GameBackground(); });

    // efeitos visuais dos bot√µes (apenas UI)
    document.addEventListener('click', (e)=>{
      const b = e.target.closest('.difficulty-btn');
      if(b){
        document.querySelectorAll('.difficulty-btn').forEach(x=>x.classList.remove('selected'));
        b.classList.add('selected');
        // Se quiser ligar √† l√≥gica real de dificuldade:
        // import('./src/js/difficulty.js').then(({setDifficultyByName}) => setDifficultyByName(b.dataset.diff));
      }
    });
    // contador online fake
    function updateOnlineCount(){
      const els=document.querySelectorAll('.online-count');
      const val=Math.floor(Math.random()*300)+1000;
      els.forEach(el=>el.textContent=val.toLocaleString());
    }
    setInterval(updateOnlineCount, 30000);
  </script>
</body>
</html>