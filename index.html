<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo Agar.io</title>
  <style>
    *{box-sizing:border-box}
    body{
      margin:0; padding:0; background:#000; display:flex; justify-content:center; align-items:center;
      min-height:100vh; font-family:Arial,sans-serif; overflow:hidden;
    }
    #gameContainer{ position:relative; background:linear-gradient(45deg,#001122 0%,#003344 100%); width:100vw; height:100vh; }
    #gameCanvas{ display:block; width:100%; height:100%; cursor:none; }
    #ui{
      position:absolute; top:10px; left:10px; color:white; font-size:18px; z-index:10;
      text-shadow:2px 2px 4px rgba(0,0,0,0.8);
    }
    #instructions{
      position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; text-align:center; z-index:5;
      background:rgba(0,0,0,0.7); padding:20px; border-radius:10px; border:2px solid #00ff88;
      max-width:90vw;
    }
    .hidden{ display:none !important; }
    #gameOver{
      position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:white; text-align:center; z-index:15;
      background:rgba(255,0,0,0.85); padding:30px; border-radius:15px; border:3px solid #ff0000;
      max-width:90vw;
    }
    button{
      background:#00ff88; color:black; border:none; padding:10px 20px; font-size:16px; border-radius:5px; cursor:pointer; margin:5px; font-weight:bold;
    }
    button:hover{ background:#00cc66; }
  </style>
</head>
<body>
  <div id="gameContainer">
    <canvas id="gameCanvas"></canvas>

    <div id="ui" class="hidden">
      <div>Pontua√ß√£o: <span id="score">0</span></div>
      <div>Massa: <span id="mass">10</span></div>
      <div id="powerUpStatus"></div>
    </div>

    <div id="instructions">
      <h2>ü¶† Jogo Agar.io ü¶†</h2>
      <p><strong>Mouse:</strong> Mover c√©lula</p>
      <p><strong>Espa√ßo:</strong> Dividir c√©lula</p>
      <p><strong>R:</strong> Reunir c√©lulas</p>
      <p><strong>Objetivo:</strong> Coma part√≠culas pequenas, evite as maiores!</p>
      <p><strong>Power-ups:</strong> ‚ö°Velocidade üõ°Ô∏èEscudo üìàCrescimento üß≤√çm√£ ‚ùÑÔ∏èCongelar ‚ú®Multi</p>
      <p><strong>Cuidado:</strong> V√≠rus vermelhos te fazem perder massa!</p>
      <button id="startBtn">üéÆ COME√áAR JOGO</button>
    </div>

    <div id="gameOver" class="hidden">
      <h2>üíÄ Game Over! üíÄ</h2>
      <p>Pontua√ß√£o Final: <span id="finalScore">0</span></p>
      <p>Massa Final: <span id="finalMass">0</span></p>
      <button id="restartBtn">üîÑ JOGAR NOVAMENTE</button>
    </div>
  </div>

  <script>
    // ===== Vari√°veis e Constantes =====
    let gameRunning=false, score=0, food=[], powerUps=[], enemies=[], viruses=[];
    let mouse={x:0,y:0}, camera={x:1000,y:750,zoom:1}, timers=[], startTime=0;
    const WORLD_WIDTH=2000, WORLD_HEIGHT=1500, INITIAL_MASS=10;

    const canvas=document.getElementById('gameCanvas');
    const ctx=canvas.getContext('2d');
    const ui=document.getElementById('ui');
    const instructions=document.getElementById('instructions');
    const gameOverDiv=document.getElementById('gameOver');
    const startBtn=document.getElementById('startBtn');
    const restartBtn=document.getElementById('restartBtn');

    let canvasCSSWidth=0, canvasCSSHeight=0; 
    let deviceRatio=1;

    // Player
    let player={
      x:WORLD_WIDTH/2, y:WORLD_HEIGHT/2, radius:18, mass:INITIAL_MASS,
      split:false, splitBalls:[], speedBoost:false, shielded:false, magnet:false, multiGain:false
    };

    function massToRadius(mass){ return Math.sqrt(Math.max(0.0001, mass))*2+5; }
    function addTimer(id){ timers.push(id); }
    function clearAllTimers(){ for (let i=0;i<timers.length;i++) clearTimeout(timers[i]); timers=[]; }
    function getTime(){ return Date.now(); }

    function resizeCanvas(){
      const rect = canvas.getBoundingClientRect();
      canvasCSSWidth = Math.max(1, Math.floor(rect.width));
      canvasCSSHeight = Math.max(1, Math.floor(rect.height));
      deviceRatio = Math.max(1, Math.floor(window.devicePixelRatio || 1));
      canvas.width = canvasCSSWidth * deviceRatio;
      canvas.height = canvasCSSHeight * deviceRatio;
      ctx.setTransform(deviceRatio,0,0,deviceRatio,0,0);
    }
    window.addEventListener('resize', resizeCanvas, {passive:true});
    resizeCanvas();

    // ... [‚ö° todo o restante do c√≥digo continua igual ao seu, s√≥ removi os trechos de `fillText` e `strokeText`]

    function render(){
      ctx.setTransform(deviceRatio,0,0,deviceRatio,0,0);
      ctx.clearRect(0,0,canvasCSSWidth,canvasCSSHeight);

      ctx.save();
      const cx = canvasCSSWidth * 0.5;
      const cy = canvasCSSHeight * 0.5;
      ctx.translate(cx, cy);
      ctx.scale(camera.zoom, camera.zoom);
      ctx.translate(-camera.x, -camera.y);

      // comida, powerups, v√≠rus, inimigos e player continuam sendo desenhados
      // MAS sem `ctx.fillText` ou `ctx.strokeText`
      
      ctx.restore();
    }
  </script>
</body>
</html>